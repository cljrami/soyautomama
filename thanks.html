<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,300;0,400;0,600;0,700;1,400&family=Playfair+Display:ital,wght@0,700&family=Kristi&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <title>AutoMama | Gracias por completar el test</title>
    <style>
      :root {
        --brand-bg: #5c3a63;
        --brand-bg-light: #f9f7fa;
        --brand-accent: #e8c3cf;
        --brand-accent-dark: #d1a3b1;
        --brand-text-light: #fdfcff;
        --brand-text-deep: #332138;
        --font-primary: "Poppins", sans-serif;
        --font-serif: "Playfair Display", serif;
        --font-signature: "Kristi", cursive;
        --brand-footer-green: #3e563e;
      }

      /* --- INICIO: ESTILOS PARA LA PANTALLA DE CARGA --- */
      #loading-screen {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--brand-bg);
        z-index: 10001;
        transition: opacity 0.8s ease-out;
        color: var(--brand-text-light);
        font-family: var(--font-primary);
      }
      .loading-content {
        text-align: center;
        padding: 2rem;
      }
      .loading-content .icon {
        font-size: 3rem;
        margin-bottom: 1.5rem;
        display: block;
        animation: pulse 2.5s infinite ease-in-out;
        color: var(--brand-accent);
      }
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }
      .loading-content h1 {
        font-family: var(--font-serif);
        font-size: clamp(1.8rem, 5vw, 2.5rem);
        color: #fff;
        margin-bottom: 1rem;
      }
      .loading-message {
        min-height: 2em;
        font-size: 1.1rem;
        opacity: 0.8;
        transition: opacity 0.5s;
      }
      .loading-bar-container {
        width: 80%;
        max-width: 300px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        height: 8px;
        margin-top: 2.5rem;
      }
      .loading-bar-fill {
        height: 100%;
        width: 0%;
        background: var(--brand-accent);
        border-radius: 20px;
        transition: width 0.5s ease-out;
      }
      /* --- FIN: ESTILOS DE CARGA --- */

      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      html,
      body {
        margin: 0 !important;
        padding: 0 !important;
        scroll-behavior: smooth;
      }

      .page-wrapper {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        overflow-y: auto;
        overflow-x: hidden;
        z-index: 999999;
        font-family: var(--font-primary);
        color: var(--brand-text-light);
        background-color: var(--brand-bg);
        opacity: 0; /* Empieza oculto para la transici√≥n */
        transition: opacity 1s ease-in;
      }
      .page-wrapper.visible {
        opacity: 1;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 0 1.5rem;
      }
      h1,
      h2 {
        font-family: var(--font-serif);
      }
      h1 {
        font-size: clamp(2.5rem, 6vw, 3.5rem);
        line-height: 1.2;
        color: #fff;
      }
      h2 {
        font-size: clamp(2rem, 5vw, 2.75rem);
        line-height: 1.2;
      }
      h3 {
        font-size: 1.1rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }
      p {
        font-size: 1.05rem;
        line-height: 1.8;
        font-weight: 400;
        opacity: 0.9;
      }
      main > section {
        padding: 6rem 0;
        text-align: center;
      }
      .bg-light {
        background-color: var(--brand-bg-light);
        color: var(--brand-text-deep);
      }
      .bg-dark {
        background-color: var(--brand-bg);
        color: var(--brand-text-light);
      }
      .hero-section {
        min-height: 80vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        text-align: center;
        background-image: radial-gradient(
          circle at 50% 0%,
          rgba(232, 195, 207, 0.15) 0%,
          transparent 70%
        );
        padding-top: 2rem;
      }
      .page-logo {
        max-width: 180px;
        margin-bottom: 2rem;
        opacity: 0.9;
      }
      .hero-content {
        max-width: 45rem;
        margin: 0 auto;
      }
      .hero-content .subtitle {
        font-size: 1.2rem;
        margin-top: 1.5rem;
      }
      .cta-button {
        background: linear-gradient(
          145deg,
          var(--brand-accent),
          var(--brand-accent-dark)
        );
        color: var(--brand-text-deep);
        font-weight: 700;
        font-size: 1.1rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        padding: 1.25rem 3rem;
        border-radius: 999px;
        text-decoration: none;
        border: none;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        box-shadow: 0 8px 20px rgba(225, 183, 195, 0.5);
        transition: all 0.3s ease;
      }
      .cta-button:hover {
        transform: translateY(-5px) scale(1.05);
      }
      .profile-card {
        background: #fff;
        color: var(--brand-text-deep);
        border-radius: 1.5rem;
        padding: clamp(2rem, 5vw, 4rem);
        text-align: left;
        box-shadow: 0 30px 60px -15px rgba(40, 20, 45, 0.3);
        min-height: 200px;
      }
      .profile-header {
        text-align: center;
        margin-bottom: 3rem;
      }
      .profile-header h2 {
        color: var(--brand-text-deep);
      }
      .profile-flow {
        position: relative;
        padding-left: 2.5rem;
        border-left: 2px solid #eee;
      }
      .flow-step {
        margin-bottom: 3rem;
        position: relative;
      }
      .flow-step:last-child {
        margin-bottom: 0;
      }
      .flow-icon {
        position: absolute;
        left: -2.5rem;
        top: 0;
        transform: translateX(-50%);
        background-color: var(--brand-accent);
        color: var(--brand-text-deep);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: inline-flex;
        justify-content: center;
        align-items: center;
        font-size: 1rem;
        border: 4px solid #fff;
      }
      .flow-step h3 {
        font-size: 1.1rem;
        color: var(--brand-text-deep);
      }
      .flow-step p,
      .flow-step li {
        font-size: 1rem;
        line-height: 1.8;
        color: var(--brand-text-deep);
        opacity: 0.8;
      }
      .consequences-list {
        list-style: none;
        padding: 0;
        margin-top: 1.5rem;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }
      .consequences-list li {
        background-color: rgba(212, 175, 185, 0.1);
        padding: 1rem 1.5rem;
        border-radius: 0.75rem;
        text-align: left;
      }
      .danja-note-wrapper {
        margin: 3rem 0 2rem;
        padding: 2.5rem;
        text-align: center;
      }
      .danja-note-wrapper p {
        font-family: var(--font-serif);
        font-style: italic;
        font-size: 1.2rem;
        margin: 0 auto;
        max-width: 35rem;
      }
      .danja-note-wrapper .name {
        font-family: var(--font-signature);
        font-size: 2.8rem;
        color: var(--brand-accent-dark);
        margin-top: 1rem;
      }
      .first-step {
        margin-top: 2rem;
        background: linear-gradient(
          135deg,
          var(--brand-accent),
          var(--brand-accent-dark)
        );
        border-radius: 1.25rem;
        padding: 2.5rem;
        text-align: center;
        color: var(--brand-text-deep);
      }
      .first-step p {
        font-size: clamp(1.2rem, 4vw, 1.75rem);
        font-family: var(--font-serif);
        font-style: italic;
      }
      .glass-card {
        background-color: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 1.5rem;
        padding: 3rem;
      }
      .transition-section h2 {
        font-style: italic;
      }
      .transition-section p {
        max-width: 45rem;
        margin: 1.5rem auto 0;
      }
      .cta-final-section p {
        max-width: 40rem;
        margin: 1.5rem auto 2.5rem;
      }
      .site-footer {
        background-color: var(--brand-footer-green);
        padding: 3rem 1.5rem;
        color: #fff;
      }
      .footer-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 2rem;
      }
      .footer-column {
        min-width: 220px;
      }
      .footer-logo,
      .footer-social {
        flex: 1;
      }
      .footer-contact {
        flex-grow: 1.5;
        text-align: left;
      }
      .footer-logo img {
        max-width: 180px;
      }
      .footer-contact h4 {
        margin-bottom: 1rem;
        font-size: 1.2rem;
        font-weight: 600;
      }
      .footer-contact ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      .footer-contact li {
        margin-bottom: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        gap: 0.75rem;
      }
      .footer-social {
        display: flex;
        justify-content: flex-end;
        gap: 1rem;
      }
      .footer-social a {
        color: var(--brand-footer-green);
        background-color: #fff;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        display: inline-flex;
        justify-content: center;
        align-items: center;
        font-size: 1.2rem;
        text-decoration: none;
      }
      @media (max-width: 768px) {
        .footer-content,
        .footer-contact,
        .footer-social {
          flex-direction: column;
          text-align: center;
        }
        .footer-contact li,
        .footer-social {
          justify-content: center;
        }
      }
    </style>
  </head>
  <body>
    <div id="loading-screen">
      <div class="loading-content">
        <span class="icon">‚ú®</span>
        <h1>Estamos creando tu perfil</h1>
        <p class="loading-message" id="loading-message">
          Analizando tu energ√≠a...
        </p>
        <div class="loading-bar-container">
          <div class="loading-bar-fill" id="loading-bar-fill"></div>
        </div>
      </div>
    </div>

    <div class="page-wrapper" id="page-wrapper">
      <header class="hero-section">
        <div class="container">
          <img
            src="https://images.leadconnectorhq.com/image/f_webp/q_80/r_1200/u_https://assets.cdn.filesafe.space/W7yFCk0DmEmhBQ43y4Bs/media/68534989b1f8e47ec7659e62.png"
            alt="AutoMam√° Logo"
            class="page-logo"
          />
          <div class="hero-content">
            <h1>Tu cuerpo habl√≥. Ahora empieza tu regreso a ti.</h1>
            <p class="subtitle text-light">
              Gracias por completar el test. A continuaci√≥n, tu perfil de
              agotamiento personalizado.
            </p>
          </div>
        </div>
      </header>
      <main>
        <section id="test-result" class="bg-light text-deep">
          <div class="container">
            <div class="profile-card" id="profile-card-container"></div>
          </div>
        </section>

        <section id="freebie-download" class="bg-dark text-light">
          <div class="container">
            <div class="glass-card">
              <p style="font-size: 4rem; line-height: 1">üéÅ</p>
              <h2>Tu regalo est√° listo</h2>
              <h3
                style="
                  color: var(--brand-accent);
                  font-family: var(--font-serif);
                  font-style: italic;
                "
              >
                Gu√≠a de Microh√°bitos + Ritual de Pausa Consciente
              </h3>
              <p style="max-width: 42rem; margin: 1.5rem auto 2.5rem">
                Este recurso te ayudar√° a empezar a reconectar con tu energ√≠a,
                sin abrumarte. Un paso a la vez, desde el cuerpo y el coraz√≥n.
              </p>
              <a href="#" class="cta-button"
                >Descargar mi gu√≠a gratuita
                <span class="icon"><i class="fa-solid fa-download"></i></span
              ></a>
            </div>
          </div>
        </section>

        <section class="transition-section bg-light text-deep">
          <div class="container">
            <h2>¬øY si este fuera solo el comienzo?</h2>
            <p class="text-deep">
              Muchas mujeres como t√∫ han vivido con s√≠ntomas invisibles, sin
              respuestas claras ni contenci√≥n real. Por eso cre√© un espacio m√°s
              profundo, para comprender lo que te est√° pasando, encontrar alivio
              real y recuperar tu energ√≠a. Te invito a conocer el siguiente paso
              de este camino de vuelta a ti.
            </p>
          </div>
        </section>

        <section class="cta-final-section bg-dark text-light">
          <div class="container">
            <i
              class="fa-solid fa-seedling"
              style="
                color: var(--brand-accent);
                font-size: 3rem;
                margin-bottom: 1rem;
              "
            ></i>
            <h2>‚ú® Hay un espacio esper√°ndote.</h2>
            <p>Con m√°s claridad, m√°s gu√≠a, m√°s contenci√≥n.</p>
            <a href="sales-page" class="cta-button"
              >Conoce el curso + el aceite que tu cuerpo necesita
              <span class="icon"><i class="fa-solid fa-arrow-right"></i></span
            ></a>
          </div>
        </section>
      </main>

      <footer class="site-footer">
        <div class="container footer-content">
          <div class="footer-column footer-logo">
            <img
              src="https://images.leadconnectorhq.com/image/f_webp/q_80/r_1200/u_https://assets.cdn.filesafe.space/W7yFCk0DmEmhBQ43y4Bs/media/68534989b1f8e47ec7659e62.png"
              alt="AutoMam√° Logo"
            />
          </div>
          <div class="footer-column footer-contact">
            <h4>Cont√°ctanos</h4>
            <ul>
              <li>
                <i class="fa-solid fa-envelope"></i
                ><span>hola@automama.com</span>
              </li>
              <li>
                <i class="fa-solid fa-phone"></i><span>+52998766789</span>
              </li>
              <li>
                <i class="fa-solid fa-location-dot"></i><span>EEUU.</span>
              </li>
            </ul>
          </div>
          <div class="footer-column footer-social">
            <a href="#" aria-label="Facebook"
              ><i class="fa-brands fa-facebook-f"></i
            ></a>
            <a href="#" aria-label="Twitter"
              ><i class="fa-brands fa-twitter"></i
            ></a>
            <a href="#" aria-label="Instagram"
              ><i class="fa-brands fa-instagram"></i
            ></a>
          </div>
        </div>
      </footer>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const loadingScreen = document.getElementById("loading-screen");
        const pageWrapper = document.getElementById("page-wrapper");
        const profileCardContainer = document.getElementById(
          "profile-card-container"
        );
        const loadingBarFill = document.getElementById("loading-bar-fill");
        const loadingMessage = document.getElementById("loading-message");

        const messages = [
          "Conectando con tu arquetipo...",
          "Sintonizando con tus s√≠ntomas...",
          "Componiendo tu resultado...",
          "Casi listo...",
        ];

        const fetchAndDisplayResults = async () => {
          let messageIndex = 0;
          let progress = 0;
          const progressInterval = setInterval(() => {
            progress += 4;
            if (loadingBarFill) loadingBarFill.style.width = progress + "%";
            if (progress > 25 && messageIndex === 0) {
              messageIndex++;
              if (loadingMessage) loadingMessage.textContent = messages[0];
            }
            if (progress > 50 && messageIndex === 1) {
              messageIndex++;
              if (loadingMessage) loadingMessage.textContent = messages[1];
            }
            if (progress > 75 && messageIndex === 2) {
              messageIndex++;
              if (loadingMessage) loadingMessage.textContent = messages[2];
            }
            if (progress >= 100) {
              clearInterval(progressInterval);
            }
          }, 400);

          try {
            const storedAnswers = sessionStorage.getItem("automamaQuizAnswers");
            if (!storedAnswers)
              throw new Error("No se encontraron respuestas.");

            const answers = JSON.parse(storedAnswers);
            const webhookUrl =
              "https://hook.us2.make.com/nnlnnlgldaeo8osrloymx6e1v491ivzs";

            const response = await fetch(webhookUrl, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(answers),
            });

            if (!response.ok)
              throw new Error(`Error del servidor: ${response.statusText}`);

            const resultData = await response.json();

            clearInterval(progressInterval);
            if (loadingBarFill) loadingBarFill.style.width = "100%";

            setTimeout(() => {
              loadingScreen.style.opacity = "0";
              setTimeout(() => {
                loadingScreen.style.display = "none";
                pageWrapper.classList.add("visible"); // Usamos la clase para mostrar la p√°gina
              }, 800);

              let consequencesHTML = resultData.consequencesList
                .map((item) => `<li>${item}</li>`)
                .join("");
              const resultHTML = `
                            <div class="profile-header"><h2>${resultData.profileTitle}</h2></div>
                            <div class="profile-flow">
                                <div class="flow-step"><div class="flow-icon"><i class="fa-solid fa-user-shield"></i></div><h3>Arquetipo emocional</h3><p>${resultData.archetypeText}</p></div>
                                <div class="flow-step"><div class="flow-icon"><i class="fa-solid fa-dna"></i></div><h3>Explicaci√≥n biol√≥gica</h3><p>${resultData.biologyText}</p></div>
                                <div class="flow-step"><div class="flow-icon"><i class="fa-solid fa-triangle-exclamation"></i></div><h3>Consecuencias si no haces nada</h3><ul class="consequences-list">${consequencesHTML}</ul></div>
                                <div class="danja-note-wrapper"><p>"${resultData.danjaNote}"</p><div class="name">Danja</div></div>
                                <div class="first-step"><h3><i class="fa-solid fa-hand-holding-heart"></i>Afirmaci√≥n y Primer Paso</h3><p>‚Äú${resultData.affirmationText}‚Äù</p></div>
                            </div>`;
              profileCardContainer.innerHTML = resultHTML;
            }, 600);
          } catch (error) {
            console.error("Error al procesar los resultados:", error);
            loadingScreen.innerHTML = `<div class="loading-content"><h3 style="font-family: var(--font-serif); font-size: 1.5rem;">¬°Ups! Ocurri√≥ un error</h3><p style="opacity: 0.8;">No pudimos generar tus resultados.<br>Por favor, intenta hacer el test nuevamente.</p></div>`;
          } finally {
            sessionStorage.removeItem("automamaQuizAnswers");
          }
        };

        fetchAndDisplayResults();
      });
    </script>
  </body>
</html>
